---
title: "Agent Specification"
description: "Complete API specification for building Bhindi agents, including required endpoints, DTOs, and response formats."
icon: "file-code"
---

<Card title="Building Bhindi Agents" icon="code">
  Every Bhindi agent must implement a standardized API with specific endpoints
  and data transfer objects (DTOs). This ensures consistency and
  interoperability across all agents in the Bhindi ecosystem.
</Card>

## How Agents Work

```mermaid
graph LR
    A[User Request] --> B[Bhindi Platform]
    B --> C[GET /tools]
    C --> D[Discover Capabilities]
    D --> E[POST /tools/:toolName]
    E --> F[Execute Action]
    F --> G[Return Result]

    style A fill:#e74c3c,stroke:#c0392b,color:#fff
    style B fill:#3498db,stroke:#2980b9,color:#fff
    style G fill:#2ecc71,stroke:#27ae60,color:#fff
```

<Note>
  Agents receive natural language requests, discover available tools, and
  execute actions to help users accomplish their goals.
</Note>

## Required Endpoints

### 1. GET `/tools` - Discover Capabilities

<Card title="Tools Discovery" icon="magnifying-glass">
  Returns the list of available tools (functions) that your agent can execute.
  This allows Bhindi to discover what capabilities your agent provides.
</Card>

**Tool Definition:**

```typescript
export class ToolsResponseDto {
  tools: ToolDto[];
}

export class ToolDto {
  name: string; // Unique tool identifier eg. "sendMessage"
  description: string; // Human-readable description eg. "Send a message to a Slack user or channel"
  parameters: ToolParameterDto; // JSON Schema for parameters eg. { "query": { "type": "string", "description": "Name of user/channel to send message to" } }
  confirmationRequired?: boolean; // Whether user confirmation is needed eg. true
  visibleParameters?: string[]; // Parameters to show in UI eg. ["query", "text"]
}

export class ToolParameterDto {
  type: "object";
  properties: Record<string, PropertyDto>;
  required?: string[];
}

export class PropertyDto {
  type: "string" | "number" | "boolean" | "array" | "object";
  description: string;
  enum?: string[]; // For enum parameters eg. ["user", "channel", "id", "unknown"]
  default?: any; // Default value eg. "unknown"
  items?: PropertyDto; // For array parameters eg. { "type": "string", "description": "Name of user/channel to send message to" }
}
```

**Response Example:**

```json
{
  "tools": [
    {
      "name": "sendMessage",
      "description": "Send a message to a Slack user or channel",
      "parameters": {
        "type": "object",
        "properties": {
          "query": {
            "type": "string",
            "description": "Name of user/channel to send message to"
          },
          "text": {
            "type": "string",
            "description": "Message content"
          }
        },
        "required": ["query", "text"]
      },
      "confirmationRequired": true
    }
  ]
}
```

### 2. POST `/tools/:toolName` - Execute Actions

<Card title="Tool Execution" icon="play">
  Executes a specific tool with the provided parameters. This endpoint performs
  the actual work requested by the user.
</Card>

**Request Example:**

```http
POST /tools/sendMessage
Content-Type: application/json

{
  "query": "#general",
  "text": "Hello from Bhindi!"
}
```

**Response Format**: `BaseSuccessResponseDto<T> | BaseErrorResponseDto`

```typescript
// Success Response
export class BaseSuccessResponseDto<T> {
  success: true;
  responseType: "text" | "html" | "media" | "mixed";
  data: {
    [key: string]: T;
  };
}

// Error Response
export class BaseErrorResponseDto {
  success: false;
  error: {
    message: string;
    code: number | string;
    details: string;
  };
}
```

**Success Response:**

```json
{
  "success": true,
  "responseType": "text",
  "data": {
    "text": "Message sent successfully to #general channel"
  }
}
```

**Error Response:**

```json
{
  "success": false,
  "error": {
    "message": "Channel not found",
    "code": "CHANNEL_NOT_FOUND",
    "details": "The specified channel does not exist"
  }
}
```

### 3. POST `/resource` (Optional) - Provide Context

<Card title="Context Provider" icon="database">
  Provides contextual information about the current user or environment. Called
  automatically by Bhindi before tool execution.
</Card>

**Common Use Cases:**

<CardGroup cols={2}>
  <Card title="User Context" icon="user">
    User profile, permissions, preferences
  </Card>
  <Card title="Environment" icon="globe">
    Workspace info, available resources
  </Card>
  <Card title="Authentication" icon="key">
    Access tokens, credentials context
  </Card>
  <Card title="Configuration" icon="gear">
    Project settings, environment variables
  </Card>
</CardGroup>

## Data Types Reference

<Tabs>
  <Tab title="Tool Definition">
    ### ToolDto

    | Field | Type | Required | Description |
    |-------|------|----------|-------------|
    | `name` | `string` | ✅ | Unique tool identifier |
    | `description` | `string` | ✅ | Human-readable description |
    | `parameters` | `ToolParameterDto` | ✅ | JSON Schema for parameters |
    | `confirmationRequired` | `boolean` | ❌ | Whether user confirmation is needed |
    | `visibleParameters` | `string[]` | ❌ | Parameters to show in UI |

    <Tip>
      **DTO** stands for Data Transfer Object - a plain object used to transfer data between client and server.
    </Tip>

  </Tab>

  <Tab title="Parameters">
    ### ToolParameterDto

    ```typescript
    export class ToolParameterDto {
      type: "object";
      properties: Record<string, PropertyDto>;
      required?: string[];
    }
    ```

    ### PropertyDto

    ```typescript
    export class PropertyDto {
      type: "string" | "number" | "boolean" | "array" | "object";
      description: string;
      enum?: string[];        // For dropdown options
      default?: any;          // Default value
      items?: PropertyDto;    // For array types
    }
    ```

  </Tab>

  <Tab title="Responses">
    ### Success Response

    ```typescript
    export class BaseSuccessResponseDto<T> {
      success: true;
      responseType: "text" | "html" | "media" | "mixed";
      data: {
        [key: string]: T;
      };
    }
    ```

    ### Error Response

    ```typescript
    export class BaseErrorResponseDto {
      success: false;
      error: {
        message: string;      // Human-readable error
        code: string;         // Machine-readable code
        details: string;      // Additional context
      };
    }
    ```

  </Tab>
</Tabs>

## Response Types

<CardGroup cols={2}>
  <Card title="text" icon="file">
    Simple text responses for basic operations
  </Card>
  <Card title="html" icon="code">
    Rich HTML content with formatting
  </Card>
  <Card title="media" icon="image">
    Images, files, or multimedia content
  </Card>
  <Card title="mixed" icon="grip">
    Combination of different content types
  </Card>
</CardGroup>

## Reserved Keywords

<Warning>
  These keywords are reserved by Bhindi and cannot be used as parameter names in
  your custom agent:
</Warning>

<CardGroup cols={4}>
  <Card title="userId" icon="user">
    User identifier
  </Card>

<Card title="jobId" icon="briefcase">
  Job execution ID
</Card>

<Card title="executionId" icon="play">
  Execution instance ID
</Card>

  <Card title="chatId" icon="comment">
    Chat session ID
  </Card>
</CardGroup>

## Implementation Guide

<Steps>
  <Step title="Design Your Agent" icon="lightbulb">
    **Plan what your agent will do**
    
    - What service will it connect to?
    - What actions can users perform?
    - What authentication is needed?
    - What context information is required?
    
    <Card title="Example: Slack Agent" icon="slack">
      Connects to Slack API to send messages, create channels, and manage workspace
    </Card>
  </Step>

<Step title="Implement Endpoints" icon="code">
  **Build the required API endpoints**
  <CardGroup cols={3}>
    <Card title="/tools" icon="list">
      Return available tools
    </Card>
    <Card title="/tools/:name" icon="play">
      Execute specific tool
    </Card>
    <Card title="/resource" icon="database">
      Provide context (optional)
    </Card>
  </CardGroup>
  <Tip>
    Start with the `/tools` endpoint first - it's the foundation for everything
    else.
  </Tip>
</Step>

<Step title="Test & Validate" icon="vial">
  **Ensure your agent works correctly** - Test all endpoints with sample data -
  Validate JSON schemas match your responses - Handle errors gracefully - Check
  authentication flows
  <Info>
    Use tools like Postman or curl to test your endpoints before integrating
    with Bhindi.
  </Info>
</Step>

  <Step title="Deploy Your Agent" icon="rocket">
    **Make your agent available to users**
    
    - Submit your agent for review
    - Provide clear documentation
    - Monitor performance and errors
    - Iterate based on user feedback
    
    <Card title="Ready to Go?" icon="rocket">
      Once approved, your agent will be available to all Bhindi users!
    </Card>
  </Step>
</Steps>

## Best Practices

<CardGroup cols={2}>
  <Card title="Clear Descriptions" icon="comment">
    Write descriptive tool names and parameter descriptions that users can
    easily understand
  </Card>

<Card title="Error Handling" icon="bug">
  Provide helpful error messages with specific details about what went wrong
</Card>

<Card title="Parameter Validation" icon="shield-check">
  Validate all input parameters and return clear validation errors
</Card>

  <Card title="Performance" icon="chart-simple">
    Keep response times fast - users expect quick results from their agents
  </Card>
</CardGroup>

---

<Card title="Need Help Building Your Agent?" icon="question">
  Check out our [quickstart guide](/custom-agent/quickstart) or join our
  developer community for support and best practices.
</Card>
